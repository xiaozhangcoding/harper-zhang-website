---
interface Props {
  title: string;
  description: string;
  pubDate: Date;
  slug: string;
  heroImage?: string;
  hasTranslation?: boolean;
  enSlug?: string;
  zhSlug?: string;
  enTitle?: string;
  zhTitle?: string;
  enDescription?: string;
  zhDescription?: string;
}

const { title, description, pubDate, slug, heroImage, hasTranslation, enSlug, zhSlug, enTitle, zhTitle, enDescription, zhDescription } = Astro.props;

const formattedDate = pubDate.toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric',
});
---

<article class="group">
  <div class="block">
    <time class="text-sm text-warmGray">{formattedDate}</time>
    
    {hasTranslation ? (
      <div class="mt-3 space-y-3">
        {zhSlug && zhTitle && (
          <a href={`/blog/${zhSlug}`} class="block no-underline hover:bg-warmWhite/30 p-3 rounded-lg transition-colors">
            <div class="flex items-center gap-2 mb-2">
              <span class="text-xs bg-warmGray/20 px-2 py-0.5 rounded">中文</span>
            </div>
            <h3 class="text-lg font-heading text-softBrown hover:text-accent transition-colors mb-1">
              {zhTitle}
            </h3>
            {zhDescription && (
              <p class="text-sm text-warmGray leading-relaxed">{zhDescription}</p>
            )}
          </a>
        )}
        {enSlug && enTitle && (
          <a href={`/blog/${enSlug}`} class="block no-underline hover:bg-warmWhite/30 p-3 rounded-lg transition-colors">
            <div class="flex items-center gap-2 mb-2">
              <span class="text-xs bg-warmGray/20 px-2 py-0.5 rounded">EN</span>
            </div>
            <h3 class="text-lg font-heading text-softBrown hover:text-accent transition-colors mb-1">
              {enTitle}
            </h3>
            {enDescription && (
              <p class="text-sm text-warmGray leading-relaxed">{enDescription}</p>
            )}
          </a>
        )}
      </div>
    ) : (
      <a href={`/blog/${slug}`} class="block no-underline">
        <h3 class="text-xl font-heading text-softBrown group-hover:text-accent transition-colors mt-1 mb-2">
          {title}
        </h3>
        <p class="text-warmGray leading-relaxed">{description}</p>
      </a>
    )}
  </div>
</article>
